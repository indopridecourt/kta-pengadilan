<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>KTA Pengadilan Kota Indopride</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Cinzel:wght@700&family=Inter:wght@500;600&display=swap');

body{
    background:#bfbfbf;
    font-family:'Inter',sans-serif;
}

.card{
    width:1000px;
    height:650px;
    background:#f7f4ee;
    margin:40px auto;
    box-shadow:0 20px 40px rgba(0,0,0,.35);
    position:relative;
}

/* HEADER */
.header{
    background:linear-gradient(90deg,#000,#222);
    color:#fff;
    padding:25px 40px;
    display:flex;
    align-items:center;
}
.header img{height:70px;margin-right:25px}
.header h1{
    font-family:'Cinzel',serif;
    font-size:38px;
    margin:0;
    letter-spacing:2px;
}
.header p{margin:6px 0 0;font-size:15px;opacity:.9}

/* STRIP */
.strip{
    background:#6b1115;
    color:#fff;
    padding:14px 40px;
    display:flex;
    justify-content:space-between;
    font-weight:700;
    letter-spacing:1.5px;
    font-size:14px;
}

/* EDIT */
#editBtn{
    position:absolute;
    top:175px;
    right:40px;
    padding:7px 16px;
    font-size:13px;
    cursor:pointer;
}

/* CONTENT */
.content{display:flex;padding:40px;position:relative}

/* WATERMARK */
.watermark{
    position:absolute;
    top:50%;left:50%;
    width:520px;
    opacity:.06;
    transform:translate(-50%,-50%);
}

/* LEFT */
.left{width:65%;z-index:1}
.block{
    background:#ece8df;
    padding:32px 36px;
    border-left:7px solid #caa24a;
}
.block small{
    font-weight:700;
    letter-spacing:1.2px;
    color:#6b1115;
    font-size:13px;
}

/* TEXT – DIBESARKAN */
.name{
    font-family:'Merriweather',serif;
    font-size:40px;
    font-weight:700;
    margin:14px 0;
}
.divisi{
    font-size:22px;
    font-weight:600;
}
.address{
    font-size:15px;
    margin-top:10px;
    opacity:.9;
}

/* FORM */
.form{display:none;margin-bottom:14px}
.card.edit-mode .form{display:block}
.form input{
    width:100%;
    padding:12px;
    margin-top:10px;
    font-size:15px;
}

/* SIGNATURE – BESAR & TEGAS */
.signature{
    margin-top:48px;
}
.signature .title{
    font-size:15px;
    font-weight:700;
    letter-spacing:1.5px;
}
.signature img{
    height:95px;
    margin:10px 0;
}
.signature .name{
    font-family:'Cinzel',serif;
    font-size:22px;
    font-weight:700;
}

/* PHOTO */
.photo{width:280px;margin-left:auto;z-index:1}
.photo-box{
    width:260px;height:330px;
    border:5px solid #6b1115;
    outline:3px solid #caa24a;
    outline-offset:-10px;
    background:#000;
    position:relative;
}
.photo-box img{
    width:100%;height:100%;
    object-fit:cover;
}
.photo-box input{
    position:absolute;
    inset:0;
    opacity:0;
    cursor:pointer;
}
.valid{
    background:#6b1115;
    color:#fff;
    text-align:center;
    padding:14px;
    margin-top:12px;
    font-weight:700;
    letter-spacing:1.2px;
    font-size:15px;
}

/* PRINT */
@media print{
    body{background:#fff}
    #editBtn,.form{display:none}
    .card{box-shadow:none}
}
</style>
</head>

<body>

<div class="card" id="card">

<div class="header">
    <img src="logo.png">
    <div>
        <h1>KARTU TANDA ANGGOTA</h1>
        <p>PENGADILAN KOTA INDOPRIDE</p>
    </div>
</div>

<div class="strip">
    <span>PERANGKAT PENGADILAN</span>
    <span id="nomor"></span>
</div>

<button id="editBtn">EDIT DATA</button>

<div class="content">
<img src="scales.png" class="watermark">

<div class="left">
<div class="block">
<small>LEMBAGA KEHAKIMAN</small>

<div class="form">
<input id="namaInput" placeholder="Nama Anggota">
<input id="jabatanInput" placeholder="Jabatan">
<input id="validInput" type="date">
</div>

<div class="name" id="namaDisplay">NAMA ANGGOTA</div>
<div class="divisi" id="jabatanDisplay">JABATAN</div>
<div class="address">
Jl. Occupation Avenue Kota Indopride – Kode Pos 7239
</div>
</div>

<div class="signature">
<div class="title">KEPALA PENGADILAN</div>
<img src="signature.png">
<div class="name">KOWE GORILA</div>
</div>
</div>

<div class="photo">
<div class="photo-box">
<img id="photoPreview" src="foto-default.png">
<input type="file" id="photoInput" accept="image/*">
</div>
<div class="valid" id="validDate">BERLAKU HINGGA</div>
</div>

</div>
</div>

<script>
const card=document.getElementById("card");
const btn=document.getElementById("editBtn");
btn.onclick=()=>{
    card.classList.toggle("edit-mode");
    btn.innerText=card.classList.contains("edit-mode")?"SELESAI":"EDIT DATA";
};

if(!localStorage.getItem("ktaNumber")){
    const y=new Date().getFullYear();
    const r=Math.floor(100000+Math.random()*900000);
    localStorage.setItem("ktaNumber",`PN-IDP-${y}-${r}`);
}
document.getElementById("nomor").innerText="NO. "+localStorage.getItem("ktaNumber");

function bind(i,d,k,def){
    const I=document.getElementById(i);
    const D=document.getElementById(d);
    const v=localStorage.getItem(k);
    D.innerText=v||def;
    I.value=v||"";
    I.oninput=()=>{
        D.innerText=I.value||def;
        localStorage.setItem(k,I.value);
    };
}
bind("namaInput","namaDisplay","ktaNama","NAMA ANGGOTA");
bind("jabatanInput","jabatanDisplay","ktaJabatan","JABATAN");

const vI=document.getElementById("validInput");
const vD=document.getElementById("validDate");
if(localStorage.getItem("ktaValid")){
    vI.value=localStorage.getItem("ktaValid");
    setDate(vI.value);
}
vI.onchange=()=>{
    localStorage.setItem("ktaValid",vI.value);
    setDate(vI.value);
};
function setDate(v){
    if(!v)return;
    vD.innerText="BERLAKU HINGGA\n"+
    new Date(v).toLocaleDateString("id-ID",
    {day:'2-digit',month:'long',year:'numeric'});
}

const pI=document.getElementById("photoInput");
const pP=document.getElementById("photoPreview");
if(localStorage.getItem("ktaPhoto")){
    pP.src=localStorage.getItem("ktaPhoto");
}
pI.onchange=()=>{
    const f=pI.files[0];
    if(!f)return;
    const r=new FileReader();
    r.onload=e=>{
        pP.src=e.target.result;
        localStorage.setItem("ktaPhoto",e.target.result);
    };
    r.readAsDataURL(f);
};
</script>

</body>
</html>
